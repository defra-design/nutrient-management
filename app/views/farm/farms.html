{% extends "layouts/main.html" %}

{% block pageTitle %}
  Question – {{ serviceName }} – GOV.UK
{% endblock %}

{% block header %}
  {% include "/templates/headers/header_signed_in_start.html" ignore missing %}
{% endblock %}

{% block content %}

{% macro estimates() %}
  <h2 class="govuk-heading-s margin-bottom-ten padding-top-five">Nutrient supply estimates</h2>
  <p class="govuk-body margin-bottom-ten">
    Estimate nutrient supply from organic materials, and their potential financial value.
  </p>
  <p class="govuk-body margin-bottom-ten">
    {% if data.manner_applications.length == 0 %}
      <a class="govuk-link" href="/manner/about_manner">Create a nutrient supply estimate</a>
    {% else %}
      <a class="govuk-link" href="/manner/previous_calculations">Create a nutrient supply estimate</a> 
    {% endif %}
  </p> 
  <p class="govuk-body">
    Estimates are created using the MANNER-NPK nutrient calculation engine.
  </p> 
{% endmacro %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">
    {% if data.show_success_message == true %}
      {% include "./templates/success_messages" ignore missing %}
    {% endif %}
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h1 class="govuk-heading-l">
      Plan and manage nutrient applications
    </h1>
  </div>
</div>

{% if data.oaktree_farm.setup == false %}
  <!-- no farms added -->
  <div class="govuk-grid-row">

    <div class="govuk-grid-column-two-thirds">
      <p class="govuk-body margin-bottom-five">
        To create a nutrient management plan, first add a farm.
      </p>
      <p class="govuk-body margin-bottom-thirty">
        You can then create NVZ reports for the farm.
      </p>
    
      <form class="form margin-bottom-thirty" action="about_nmpt" method="post">
        <button type="submit" class="govuk-button margin-bottom-none" data-module="govuk-button">
          Create a nutrient management plan
        </button>
      </form>
    </div>

    <div class="govuk-grid-column-two-thirds">
      {{ estimates() }}
    </div>

  </div>
{% else %}
<!-- farms added -->
  <div class="govuk-grid-row">

    <div class="govuk-grid-column-two-thirds">
      <h2 class="govuk-heading-m">Nutrient management plans and NVZ reports</h2>
      <p class="govuk-body">
        Select a farm to create or update a nutrient management plan, <br>or to save an NVZ report.
      </p>
      <h3 class="govuk-heading-s margin-top-none">Your farms</h3>
      <ul class="govuk-list govuk-list--spaced">
        <li>          
          <a class="govuk-notification-banner__link" href="hub_message_reset"> {{data.oaktree_farm.name}}</a> 
        </li>              
        <li>          
          <a class="govuk-notification-banner__link" href=""> Dusty Farm</a> 
        </li>
        <li>          
          <a class="govuk-notification-banner__link" href=""> Hopper's Farm</a> 
        </li>              
      </ul>
      <p class="govuk-body">
        You can also <a class="govuk-link" href="/add-farm/name">add a new farm</a>.
      </p>
    </div>

    <div class="govuk-grid-column-one-third">
      {{ estimates() }}
    </div>

  </div>

{% endif %}
{% endblock %}